<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Placar Basquete Mobile</title>
    <style>
        :root {
            --cor-branco: #ffffff;
            --cor-azul: #1a73e8;
            --cor-fundo: #121212;
            --cor-texto: #e0e0e0;
            --cor-destaque: #4CAF50;
            --cor-alerta: #f44336;
            --cor-botao: #333333;
            --cor-botao-hover: #454545;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Roboto', Arial, sans-serif;
            background-color: var(--cor-fundo);
            color: var(--cor-texto);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }

        #app {
            width: 100%;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Scoreboard */
        .scoreboard {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 5px;
            width: 100%;
        }

        .team {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            border-radius: 10px;
            padding: 10px;
            min-height: 120px;
        }

        .team-white {
            background-color: var(--cor-branco);
            color: #000;
        }

        .team-blue {
            background-color: var(--cor-azul);
            color: var(--cor-branco);
        }

        .logo-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 60px;
            width: 60px;
        }

        .logo {
            height: 50px;
            width: auto;
            max-width: 100%;
        }

        .team-name {
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 5px;
            text-align: center;
            word-break: break-word;
        }

        .team-score {
            font-size: 2.5rem;
            font-weight: bold;
            margin: 10px 0;
            transition: all 0.3s;
        }

        .score-updated {
            transform: scale(1.1);
            color: var(--cor-destaque);
        }

        /* Team Controls */
        .team-controls {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            width: 100%;
        }

        .control-group {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-row {
            display: flex;
            gap: 8px;
        }

        .btn {
            flex: 1;
            padding: 12px 5px;
            font-size: 0.9rem;
            border: none;
            border-radius: 8px;
            background-color: var(--cor-botao);
            color: white;
            cursor: pointer;
            transition: background-color 0.2s;
            user-select: none;
        }

        .btn:hover, .btn:active {
            background-color: var(--cor-botao-hover);
        }

        .btn-point {
            font-weight: bold;
        }

        .btn-foul {
            background-color: #d32f2f;
        }

        .btn-foul:hover {
            background-color: #f44336;
        }

        /* Foul Display */
        .foul-display {
            display: flex;
            justify-content: space-between;
            gap: 10px;
            margin: 5px 0;
        }

        .foul-box {
            flex: 1;
            padding: 10px;
            border-radius: 8px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .foul-white {
            background-color: var(--cor-branco);
            color: #000;
        }

        .foul-blue {
            background-color: var(--cor-azul);
            color: var(--cor-branco);
        }

        /* Period Display */
        .period-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin: 10px 0;
        }

        .period-text {
            font-size: 1.2rem;
            font-weight: bold;
            min-width: 100px;
            text-align: center;
        }

        /* Timers */
        .timer-container {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .timer-box {
            background-color: var(--cor-botao);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .timer-display {
            font-size: 1.8rem;
            font-weight: bold;
            font-family: 'Roboto Mono', monospace;
            text-align: center;
            flex: 1;
        }

        .timer-label {
            font-size: 0.9rem;
            text-align: center;
            margin-top: 5px;
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 5px;
        }

        .btn-timer {
            padding: 10px 15px;
        }

        .btn-start {
            background-color: var(--cor-destaque);
        }

        .btn-start:hover {
            background-color: #45a049;
        }

        .btn-reset {
            background-color: #ff9800;
        }

        .btn-reset:hover {
            background-color: #fb8c00;
        }

        /* Action Buttons */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 10px;
        }

        .action-row {
            display: flex;
            gap: 10px;
        }

        .btn-action {
            flex: 1;
            padding: 12px;
            font-weight: bold;
        }

        .btn-timeout {
            background-color: #2196F3;
        }

        .btn-timeout:hover {
            background-color: #0b7dda;
        }

        .btn-horn {
            background-color: var(--cor-alerta);
        }

        .btn-horn:hover {
            background-color: #e53935;
        }

        .btn-fullscreen {
            background-color: #9c27b0;
        }

        .btn-fullscreen:hover {
            background-color: #7b1fa2;
        }

        .btn-config {
            background-color: #607d8b;
        }

        .btn-config:hover {
            background-color: #455a64;
        }

        /* Config Menu */
        .config-menu {
            background-color: var(--cor-botao);
            border-radius: 10px;
            padding: 15px;
            margin-top: 10px;
            display: none;
            flex-direction: column;
            gap: 15px;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, padding 0.3s ease-out;
        }

        .config-menu.open {
            display: flex;
            max-height: 500px;
            padding: 15px;
        }

        .team-inputs {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .input-group label {
            font-size: 0.9rem;
            font-weight: bold;
        }

        .input-group input, .input-group select {
            padding: 10px;
            border-radius: 5px;
            border: none;
            background-color: #454545;
            color: white;
        }

        .config-buttons {
            display: flex;
            gap: 10px;
        }

        /* Blinking effect for fouls */
        @keyframes blink {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .blinking {
            animation: blink 1s infinite;
            background-color: var(--cor-alerta) !important;
        }

        /* Media Queries for very small devices */
        @media (max-width: 350px) {
            .team-score {
                font-size: 2rem;
            }
            
            .btn {
                padding: 10px 3px;
                font-size: 0.8rem;
            }
            
            .timer-display {
                font-size: 1.5rem;
            }

            .logo-container {
                height: 50px;
                width: 50px;
            }

            .logo {
                height: 40px;
            }
        }

        /* Landscape orientation */
        @media (orientation: landscape) and (max-height: 500px) {
            #app {
                max-width: 100%;
                padding: 5px;
            }
            
            .scoreboard {
                flex-direction: column;
            }
            
            .team-controls {
                flex-direction: column;
            }
            
            .control-row {
                flex-wrap: wrap;
            }
            
            .btn {
                min-width: 60px;
            }

            .logo-container {
                height: 40px;
                width: 40px;
                margin: 5px 0;
            }

            .logo {
                height: 35px;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <!-- Scoreboard -->
        <div class="scoreboard">
            <div class="team team-white" id="white-team">
                <div class="team-name" id="white-team-name-display">Branco</div>
                <div class="team-score" id="white-score">0</div>
            </div>
            
            <div class="logo-container">
                <img src="basquete.gif" alt="Basquete" class="logo">
            </div>
            
            <div class="team team-blue" id="blue-team">
                <div class="team-name" id="blue-team-name-display">Azul</div>
                <div class="team-score" id="blue-score">0</div>
            </div>
        </div>

        <!-- Team Controls -->
        <div class="team-controls">
            <div class="control-group">
                <div class="control-row">
                    <button class="btn btn-point" onclick="ajustarPlacar('white', 1)">+1</button>
                    <button class="btn btn-point" onclick="ajustarPlacar('white', 2)">+2</button>
                </div>
                <div class="control-row">
                    <button class="btn btn-point" onclick="ajustarPlacar('white', 3)">+3</button>
                    <button class="btn btn-foul" onclick="ajustarFaltas('white', 1)">Falta</button>
                </div>
            </div>
            
            <div class="control-group">
                <div class="control-row">
                    <button class="btn btn-point" onclick="ajustarPlacar('blue', 1)">+1</button>
                    <button class="btn btn-point" onclick="ajustarPlacar('blue', 2)">+2</button>
                </div>
                <div class="control-row">
                    <button class="btn btn-point" onclick="ajustarPlacar('blue', 3)">+3</button>
                    <button class="btn btn-foul" onclick="ajustarFaltas('blue', 1)">Falta</button>
                </div>
            </div>
        </div>

        <!-- Foul Display -->
        <div class="foul-display">
            <div class="foul-box foul-white" id="white-foul">0</div>
            <div class="foul-box foul-blue" id="blue-foul">0</div>
        </div>

        <!-- Period Display -->
        <div class="period-display">
            <button class="btn" id="decrease-period">-</button>
            <div class="period-text" id="period-display">1º Período</div>
            <button class="btn" id="increase-period">+</button>
        </div>

        <!-- Game Timer -->
        <div class="timer-container">
            <div class="timer-box">
                <button class="btn" id="game-time-decrease">-</button>
                <div>
                    <div class="timer-display" id="game-time-display">12:00</div>
                    <div class="timer-label">TEMPO DE JOGO</div>
                </div>
                <button class="btn" id="game-time-increase">+</button>
            </div>
            
            <div class="timer-controls">
                <button class="btn btn-start" id="start-pause-game">Iniciar Jogo</button>
            </div>
        </div>

        <!-- Shot Clock -->
        <div class="timer-container">
            <div class="timer-box">
                <button class="btn" id="shot-clock-decrease">-</button>
                <div>
                    <div class="timer-display" id="shot-clock-display">24</div>
                    <div class="timer-label">TEMPO DE POSSE</div>
                </div>
                <button class="btn" id="shot-clock-increase">+</button>
            </div>
            
            <div class="timer-controls">
                <button class="btn btn-reset" id="reset-24">24s</button>
                <button class="btn btn-reset" id="reset-14">14s</button>
                <button class="btn btn-reset" id="reset-12">12s</button>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <div class="action-row">
                <button class="btn btn-action btn-timeout" id="time-request">TEMPO</button>
                <button class="btn btn-action btn-horn" id="horn-button">BUZINA</button>
            </div>
            <div class="action-row">
                <button class="btn btn-action btn-fullscreen" id="fullscreen-button">TELA CHEIA</button>
                <button class="btn btn-action btn-config" id="config-button">CONFIG</button>
            </div>
        </div>

        <!-- Config Menu -->
        <div class="config-menu" id="config-menu">
            <div class="team-inputs">
                <div class="input-group">
                    <label for="white-team-name">Time Branco:</label>
                    <input type="text" id="white-team-name" placeholder="Nome do Time" value="Branco">
                </div>
                <div class="input-group">
                    <label for="blue-team-name">Time Azul:</label>
                    <input type="text" id="blue-team-name" placeholder="Nome do Time" value="Azul">
                </div>
            </div>
            
            <div class="input-group">
                <label for="voice-select">Voz de Anúncio:</label>
                <select id="voice-select"></select>
            </div>
            
            <div class="config-buttons">
                <button class="btn" id="save-names">Salvar</button>
                <button class="btn" id="reset-all">Resetar</button>
            </div>
        </div>
    </div>

    <script>
        // Variáveis Globais
        const pontuacaoMaxima = 200;
        const MAX_PERIODOS = 4;
        const TEMPO_POR_PERIODO = 12 * 60; // 12 minutos em segundos
        
        let placarBranco = 0;
        let placarAzul = 0;
        let faltasBranco = 0;
        let faltasAzul = 0;
        let nomeTimeBranco = "Branco";
        let nomeTimeAzul = "Azul";
        let periodoAtual = 1;
        let intervaloPiscarFaltasBranco;
        let intervaloPiscarFaltasAzul;
        let vozes = [];
        let vozSelecionada = null;
        
        // Timers
        let intervaloJogo;
        let intervaloTempoPosse;
        let tempoJogo = TEMPO_POR_PERIODO;
        let tempoPosse = 24;
        let jogoRodando = false;
        let tempoPosseRodando = false;
        let telaCheia = false;
        let ultimoTempoAnunciado = 0;
        let configMenuAberto = false;

        // Elementos HTML
        const elementoPlacarBranco = document.getElementById('white-score');
        const elementoPlacarAzul = document.getElementById('blue-score');
        const elementoFaltasBranco = document.getElementById('white-foul');
        const elementoFaltasAzul = document.getElementById('blue-foul');
        const elementoNomeTimeBranco = document.getElementById('white-team-name-display');
        const elementoNomeTimeAzul = document.getElementById('blue-team-name-display');
        const elementoDisplayTempoJogo = document.getElementById('game-time-display');
        const elementoDisplayTempoPosse = document.getElementById('shot-clock-display');
        const elementoPeriodoDisplay = document.getElementById('period-display');
        const botaoIniciarPausar = document.getElementById('start-pause-game');
        const botaoPedirTempo = document.getElementById('time-request');
        const botaoBuzina = document.getElementById('horn-button');
        const botaoTelaCheia = document.getElementById('fullscreen-button');
        const botaoConfig = document.getElementById('config-button');
        const inputNomeTimeBranco = document.getElementById('white-team-name');
        const inputNomeTimeAzul = document.getElementById('blue-team-name');
        const botaoSalvarNomes = document.getElementById('save-names');
        const botaoResetarTudo = document.getElementById('reset-all');
        const seletorVoz = document.getElementById('voice-select');
        const botaoAumentarPeriodo = document.getElementById('increase-period');
        const botaoDiminuirPeriodo = document.getElementById('decrease-period');
        const configMenu = document.getElementById('config-menu');

        // Carrega as vozes disponíveis
        function carregarVozes() {
            vozes = window.speechSynthesis.getVoices();
            seletorVoz.innerHTML = '';

            vozes.forEach((voz, indice) => {
                const opcao = document.createElement('option');
                opcao.value = indice;
                opcao.textContent = `${voz.name} (${voz.lang})`;
                seletorVoz.appendChild(opcao);
            });

            if (vozes.length > 0) {
                vozSelecionada = vozes[0];
            }
        }

        // Configura o seletor de voz
        window.speechSynthesis.onvoiceschanged = carregarVozes;

        // Função para falar texto
        function falar(texto) {
            if (!window.speechSynthesis) {
                console.warn("Síntese de voz não disponível");
                return;
            }
            
            window.speechSynthesis.cancel();
            const fala = new SpeechSynthesisUtterance(texto);
            fala.voice = vozSelecionada;
            fala.rate = 1.0;
            fala.pitch = 1.0;
            window.speechSynthesis.speak(fala);
        }

        // Função para tocar a buzina
        function tocarBuzina() {
            try {
                const somBuzina = new Audio('buzina.mp3');
                somBuzina.play().catch(e => console.log("Erro ao tocar buzina:", e));
            } catch (e) {
                console.log("Erro ao carregar buzina:", e);
            }
        }

        // Salva as configurações
        function salvarConfiguracoes() {
            nomeTimeBranco = inputNomeTimeBranco.value.trim() || "Branco";
            nomeTimeAzul = inputNomeTimeAzul.value.trim() || "Azul";
            
            elementoNomeTimeBranco.textContent = nomeTimeBranco;
            elementoNomeTimeAzul.textContent = nomeTimeAzul;
            
            const indiceSelecionado = seletorVoz.value;
            vozSelecionada = vozes[indiceSelecionado];
            
            // Salva no localStorage
            localStorage.setItem('timeBranco', nomeTimeBranco);
            localStorage.setItem('timeAzul', nomeTimeAzul);
            localStorage.setItem('vozSelecionada', indiceSelecionado);
            
            falar("Configurações salvas");
        }

        // Carrega configurações salvas
        function carregarConfiguracoes() {
            const savedTimeBranco = localStorage.getItem('timeBranco');
            const savedTimeAzul = localStorage.getItem('timeAzul');
            const savedVoz = localStorage.getItem('vozSelecionada');
            
            if (savedTimeBranco) {
                nomeTimeBranco = savedTimeBranco;
                inputNomeTimeBranco.value = savedTimeBranco;
                elementoNomeTimeBranco.textContent = savedTimeBranco;
            }
            
            if (savedTimeAzul) {
                nomeTimeAzul = savedTimeAzul;
                inputNomeTimeAzul.value = savedTimeAzul;
                elementoNomeTimeAzul.textContent = savedTimeAzul;
            }
            
            if (savedVoz && vozes[savedVoz]) {
                seletorVoz.value = savedVoz;
                vozSelecionada = vozes[savedVoz];
            }
        }

        // Efeito visual ao atualizar placar
        function efeitoAtualizacaoPlacar(elemento) {
            elemento.classList.add('score-updated');
            setTimeout(() => {
                elemento.classList.remove('score-updated');
            }, 300);
        }

        // Ajusta o placar dos times
        function ajustarPlacar(time, pontos, silencioso = false) {
            let placarAtual, novoPlacar, nomeTime, elementoPlacar;
            
            if (time === 'white') {
                placarAtual = placarBranco;
                novoPlacar = Math.max(0, Math.min(pontuacaoMaxima, placarAtual + pontos));
                placarBranco = novoPlacar;
                elementoPlacar = elementoPlacarBranco;
                elementoPlacar.textContent = novoPlacar;
                nomeTime = nomeTimeBranco;
            } else {
                placarAtual = placarAzul;
                novoPlacar = Math.max(0, Math.min(pontuacaoMaxima, placarAtual + pontos));
                placarAzul = novoPlacar;
                elementoPlacar = elementoPlacarAzul;
                elementoPlacar.textContent = novoPlacar;
                nomeTime = nomeTimeAzul;
            }
            
            efeitoAtualizacaoPlacar(elementoPlacar);
            
            if (!silencioso) {
                falar(`${nomeTime} ${novoPlacar} pontos`);
            }
        }

        // Ajusta as faltas coletivas
        function ajustarFaltas(time, faltas, silencioso = false) {
            let totalFaltas, elementoFalta, nomeTime;
            
            if (time === 'white') {
                faltasBranco = Math.max(0, faltasBranco + faltas);
                totalFaltas = faltasBranco;
                elementoFalta = elementoFaltasBranco;
                elementoFalta.textContent = totalFaltas;
                nomeTime = nomeTimeBranco;
            } else {
                faltasAzul = Math.max(0, faltasAzul + faltas);
                totalFaltas = faltasAzul;
                elementoFalta = elementoFaltasAzul;
                elementoFalta.textContent = totalFaltas;
                nomeTime = nomeTimeAzul;
            }

            // Remove classe blinking se tiver menos que 5 faltas
            if (totalFaltas < 5) {
                elementoFalta.classList.remove('blinking');
            }

            // Adiciona classe blinking se tiver 5 faltas
            if (totalFaltas >= 5) {
                elementoFalta.classList.add('blinking');
            }

            if (!silencioso) {
                if (totalFaltas === 5) {
                    falar(`${nomeTime} com faltas estouradas!`);
                } else {
                    falar(`${totalFaltas} faltas para ${nomeTime}`);
                }
            }
        }

        // Função para formatar o tempo em minutos e segundos
        function formatarTempo(segundos) {
            const minutos = Math.floor(segundos / 60);
            const segs = segundos % 60;
            return `${minutos}:${segs < 10 ? '0' : ''}${segs}`;
        }

        // Atualiza a exibição do cronômetro do jogo
        function atualizarTempoJogo() {
            elementoDisplayTempoJogo.textContent = formatarTempo(tempoJogo);
        }

        // Atualiza a exibição do cronômetro do tempo de posse
        function atualizarTempoPosse() {
            elementoDisplayTempoPosse.textContent = tempoPosse;
        }

        // Anuncia o tempo de posse (sem anunciar o zero)
        function anunciarTempoPosse() {
            if (tempoPosse === 0) {
                ultimoTempoAnunciado = 0;
                return;
            }
            
            if (tempoPosse === 10 || tempoPosse === 5 || tempoPosse <= 3) {
                if (tempoPosse !== ultimoTempoAnunciado) {
                    falar(tempoPosse.toString());
                    ultimoTempoAnunciado = tempoPosse;
                }
            } else {
                ultimoTempoAnunciado = 0;
            }
        }

        // Atualiza o display do período
        function atualizarPeriodo() {
            elementoPeriodoDisplay.textContent = `${periodoAtual}º Período`;
            tempoJogo = TEMPO_POR_PERIODO;
            atualizarTempoJogo();
        }

        // Avança para o próximo período
        function avancarPeriodo() {
            if (periodoAtual < MAX_PERIODOS) {
                periodoAtual++;
                atualizarPeriodo();
                falar(`Início do ${periodoAtual}º período`);
            } else {
                falar("Fim de jogo");
            }
        }

        // Volta para o período anterior
        function voltarPeriodo() {
            if (periodoAtual > 1) {
                periodoAtual--;
                atualizarPeriodo();
            }
        }

        // Inicia o cronômetro do jogo
        function iniciarTempoJogo() {
            if (jogoRodando) return;
            
            jogoRodando = true;
            botaoIniciarPausar.textContent = "Pausar Jogo";
            
            intervaloJogo = setInterval(() => {
                tempoJogo--;
                atualizarTempoJogo();

                if (tempoJogo <= 0) {
                    clearInterval(intervaloJogo);
                    clearInterval(intervaloTempoPosse);
                    jogoRodando = false;
                    tempoPosseRodando = false;
                    botaoIniciarPausar.textContent = "Iniciar Jogo";
                    tocarBuzina();
                    setTimeout(avancarPeriodo, 2000);
                }
            }, 1000);
        }

        // Inicia ou continua o tempo de posse
        function iniciarTempoPosse(reset = false) {
            if (tempoPosseRodando && !reset) return;
            
            tempoPosseRodando = true;
            ultimoTempoAnunciado = 0;
            
            intervaloTempoPosse = setInterval(() => {
                tempoPosse--;
                atualizarTempoPosse();
                anunciarTempoPosse();

                if (tempoPosse <= 0) {
                    tempoPosse = 24;
                    atualizarTempoPosse();
                    tocarBuzina();
                }
            }, 1000);
        }

        // Alterna a execução do cronômetro do jogo
        function alternarTempoJogo() {
            if (jogoRodando) {
                clearInterval(intervaloJogo);
                clearInterval(intervaloTempoPosse);
                jogoRodando = false;
                tempoPosseRodando = false;
                botaoIniciarPausar.textContent = "Iniciar Jogo";
            } else {
                iniciarTempoJogo();
                iniciarTempoPosse();
            }
        }

        // Reseta o cronômetro do jogo e do tempo de posse
        function resetarTudo() {
            clearInterval(intervaloJogo);
            clearInterval(intervaloTempoPosse);
            
            // Reset placar e faltas
            placarBranco = 0;
            placarAzul = 0;
            faltasBranco = 0;
            faltasAzul = 0;
            
            elementoPlacarBranco.textContent = "0";
            elementoPlacarAzul.textContent = "0";
            elementoFaltasBranco.textContent = "0";
            elementoFaltasAzul.textContent = "0";
            
            // Reset timers
            periodoAtual = 1;
            tempoJogo = TEMPO_POR_PERIODO;
            tempoPosse = 24;
            atualizarTempoJogo();
            atualizarTempoPosse();
            atualizarPeriodo();
            
            jogoRodando = false;
            tempoPosseRodando = false;
            botaoIniciarPausar.textContent = "Iniciar Jogo";
            
            // Reset piscar
            elementoFaltasBranco.classList.remove('blinking');
            elementoFaltasAzul.classList.remove('blinking');
            
            falar("Placar resetado");
        }

        // Reseta o tempo de posse para valores específicos
        function resetarTempoPosse24() {
            clearInterval(intervaloTempoPosse);
            tempoPosse = 24;
            atualizarTempoPosse();
            iniciarTempoPosse(true);
        }

        function resetarTempoPosse14() {
            clearInterval(intervaloTempoPosse);
            tempoPosse = 14;
            atualizarTempoPosse();
            iniciarTempoPosse(true);
        }

        function resetarTempoPosse12() {
            clearInterval(intervaloTempoPosse);
            tempoPosse = 12;
            atualizarTempoPosse();
            iniciarTempoPosse(true);
        }

        // Pedido de tempo
        function pedirTempo() {
            tocarBuzina();
            setTimeout(() => {
                falar("Pedido de tempo");
            }, 999);
        }

        // Alternar tela cheia
        function alternarTelaCheia() {
            if (!telaCheia) {
                document.documentElement.requestFullscreen().catch(err => {
                    console.log(`Erro ao tentar entrar em tela cheia: ${err.message}`);
                });
                botaoTelaCheia.textContent = "SAIR TELA CHEIA";
                telaCheia = true;
            } else {
                document.exitFullscreen();
                botaoTelaCheia.textContent = "TELA CHEIA";
                telaCheia = false;
            }
        }

        // Alternar menu de configurações
        function alternarConfigMenu() {
            configMenuAberto = !configMenuAberto;
            if (configMenuAberto) {
                configMenu.classList.add('open');
                botaoConfig.textContent = "FECHAR";
            } else {
                configMenu.classList.remove('open');
                botaoConfig.textContent = "CONFIG";
            }
        }

        // Event Listeners
        document.getElementById('white-team').addEventListener('click', () => {
            ajustarPlacar('white', -1, true);
        });

        document.getElementById('blue-team').addEventListener('click', () => {
            ajustarPlacar('blue', -1, true);
        });

        document.getElementById('white-foul').addEventListener('click', () => {
            ajustarFaltas('white', -1, true);
        });

        document.getElementById('blue-foul').addEventListener('click', () => {
            ajustarFaltas('blue', -1, true);
        });

        document.getElementById('game-time-increase').addEventListener('click', () => {
            tempoJogo += 10;
            atualizarTempoJogo();
        });

        document.getElementById('game-time-decrease').addEventListener('click', () => {
            tempoJogo = Math.max(0, tempoJogo - 10);
            atualizarTempoJogo();
        });

        document.getElementById('shot-clock-increase').addEventListener('click', () => {
            tempoPosse = Math.min(99, tempoPosse + 1);
            atualizarTempoPosse();
        });

        document.getElementById('shot-clock-decrease').addEventListener('click', () => {
            tempoPosse = Math.max(0, tempoPosse - 1);
            atualizarTempoPosse();
        });

        document.getElementById('reset-24').addEventListener('click', resetarTempoPosse24);
        document.getElementById('reset-14').addEventListener('click', resetarTempoPosse14);
        document.getElementById('reset-12').addEventListener('click', resetarTempoPosse12);

        botaoPedirTempo.addEventListener('click', pedirTempo);
        botaoBuzina.addEventListener('click', tocarBuzina);
        botaoTelaCheia.addEventListener('click', alternarTelaCheia);
        botaoConfig.addEventListener('click', alternarConfigMenu);
        botaoSalvarNomes.addEventListener('click', salvarConfiguracoes);
        botaoResetarTudo.addEventListener('click', resetarTudo);
        botaoIniciarPausar.addEventListener('click', alternarTempoJogo);
        botaoAumentarPeriodo.addEventListener('click', avancarPeriodo);
        botaoDiminuirPeriodo.addEventListener('click', voltarPeriodo);
        seletorVoz.addEventListener('change', () => {
            const indiceSelecionado = seletorVoz.value;
            vozSelecionada = vozes[indiceSelecionado];
            localStorage.setItem('vozSelecionada', indiceSelecionado);
        });

        // Inicialização
        document.addEventListener('DOMContentLoaded', () => {
            carregarVozes();
            carregarConfiguracoes();
            atualizarTempoJogo();
            atualizarTempoPosse();
            atualizarPeriodo();
        });
    </script>
</body>
</html>